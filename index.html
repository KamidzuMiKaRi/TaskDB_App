<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Практика БД</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <header class="app-header">
        <h1>База Задач </h1>
        <div id="auth-status">
            <span>Статус: <strong id="current-role">Гость</strong></span>
            <button id="login-button">Войти (Администратор)</button>
        </div>
    </header>

    <main class="app-main">
        
        <aside class="sidebar">
            <h2 class="sidebar-title"> Фильтры Задач</h2>
            <div id="filter-area">
                <label for="difficulty-min">Сложность от:</label>
                <input type="number" id="difficulty-min" min="1" max="10" value="1">
                
                <label for="difficulty-max">Сложность до:</label>
                <input type="number" id="difficulty-max" min="1" max="10" value="10">
                
                <p>Теги (должны соответствовать):</p>
                <div id="tag-selector-placeholder">
                    <p>Загрузка тегов...</p>
                </div>
                
                <button id="apply-filter-button">Применить фильтр</button>
            </div>
            
            <hr>
            
            <h2 class="sidebar-title"> Справочники</h2>
            <nav>
                <ul>
                    <li><button class="nav-button active-nav" data-view="tasks">Список Задач</button></li>
                    <li class="admin-only"><button class="nav-button" data-view="contests" disabled>Управление Контестами</button></li>
                    <li class="admin-only"><button class="nav-button" data-view="tags" disabled>Управление Тегами</button></li>
                </ul>
            </nav>
            
            <hr>
            
            <button id="report-button" class="action-button">Сформировать Отчет</button>
        </aside>

        <section class="content-area">
            
            <div class="content-header">
                <h2>Список Задач (Всего: <span id="task-count">0</span>)</h2>
                <button id="add-task-button" class="action-button admin-only" disabled>+ Добавить Задачу</button>
            </div>
            
            <table id="task-list-table">
                <thead>
                    <tr>
                        <th>Название</th>
                        <th>Сложность</th>
                        <th>Polygon/Codeforces</th>
                        <th>Контесты</th>
                        <th class="admin-only">Действия</th>
                    </tr>
                </thead>
                <tbody id="task-table-body">
                    <tr><td colspan="5">База данных пока пуста.</td></tr>
                </tbody>
            </table>

        </section>
        
        <section id="contests-management-view" class="content-area" style="display: none;">
            <div class="content-header">
                <h2>Управление Контестами</h2>
            </div>
            <div class="management-form">
                <form id="add-contest-form">
                    <input type="text" id="new-contest-title" placeholder="Название нового контеста" required>
                    <input type="number" id="new-contest-year" placeholder="Год" required>
                    <button type="submit">Добавить контест</button>
                </form>
                <p id="add-contest-error-message" class="error-text" style="display: none;"></p>
            </div>
            <table id="contests-table">
                <thead>
                    <tr>
                        <th>Название</th>
                        <th>Год</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody id="contests-table-body">
                </tbody>
            </table>
        </section>

        <section id="tags-management-view" class="content-area" style="display: none;">
            <div class="content-header">
                <h2>Управление Тегами</h2>
            </div>
            <div class="management-form">
                <form id="add-tag-form">
                    <input type="text" id="new-tag-title" placeholder="Название нового тега" required>
                    <button type="submit">Добавить тег</button>
                </form>
                <p id="add-tag-error-message" class="error-text" style="display: none;"></p>
            </div>
            <table id="tags-table">
                <thead>
                    <tr>
                        <th>Название</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody id="tags-table-body">
                </tbody>
            </table>
        </section>

    </main>
    
    <!-- Модальное окно для входа -->
    <div id="login-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Вход для администратора</h2>
            <p>Пожалуйста, введите пароль (по умолчанию: <strong>password123</strong>)</p>
            <form id="login-form">
                <input type="password" id="password-input" required>
                <div class="modal-actions">
                    <button type="button" id="change-password-button">Сменить пароль</button>
                    <button type="submit" id="submit-login">Войти</button>
                    <button type="button" id="cancel-login">Отмена</button>
                </div>
            </form>
            <p id="login-error-message" class="error-text" style="display: none;"></p>
        </div>
    </div>

    <!-- Модальное окно для добавления задачи -->
    <div id="add-task-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Добавление новой задачи</h2>
            <form id="add-task-form">
                <div class="modal-form-group">
                    <label for="task-title">Название задачи:</label>
                    <input type="text" id="task-title" required>
                </div>
                <div class="modal-form-group">
                    <label for="task-difficulty">Сложность (1-10):</label>
                    <input type="number" id="task-difficulty" min="1" max="10" value="5" required>
                </div>
                <div class="modal-form-group">
                    <label for="task-link">Ссылка на Polygon/CF:</label>
                    <input type="url" id="task-link" required>
                    <p id="task-link-error" class="field-error-text" style="display: none;"></p>
                </div>
                <div class="modal-form-group">
                    <label for="task-condition">Краткое условие:</label>
                    <textarea id="task-condition" rows="3"></textarea>
                </div>
                <div class="modal-form-group">
                    <label for="task-idea">Краткая идея решения:</label>
                    <textarea id="task-idea" rows="3"></textarea>
                </div>
                <div class="modal-form-group">
                    <label for="task-note">Примечание:</label>
                    <textarea id="task-note" rows="2"></textarea>
                </div>
                <div class="modal-form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="task-is-cf-ready" disabled> Подготовлена для Codeforces? (авто)
                    </label>
                </div>
                <div class="modal-form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="task-is-yc-ready"> Подготовлена для Yandex Contest?
                    </label>
                </div>
                <div class="modal-form-group checkbox-group" id="add-task-tags"></div>
                <div class="modal-form-group checkbox-group" id="add-task-contests"></div>
                <div class="modal-actions">
                    <button type="submit">Сохранить</button>
                    <button type="button" id="cancel-add-task">Отмена</button>
                </div>
            </form>
            <p id="add-task-error-message" class="error-text" style="display: none;"></p>
        </div>
    </div>

    <!-- Модальное окно для редактирования задачи -->
    <div id="edit-task-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Редактирование задачи</h2>
            <form id="edit-task-form">
                <input type="hidden" id="edit-task-id">
                <div class="modal-form-group">
                    <label for="edit-task-title">Название задачи:</label>
                    <input type="text" id="edit-task-title" required>
                </div>
                <div class="modal-form-group">
                    <label for="edit-task-difficulty">Сложность (1-10):</label>
                    <input type="number" id="edit-task-difficulty" min="1" max="10" value="5" required>
                </div>
                <div class="modal-form-group">
                    <label for="edit-task-link">Ссылка на Polygon/CF:</label>
                    <input type="url" id="edit-task-link" required>
                    <p id="edit-task-link-error" class="field-error-text" style="display: none;"></p>
                </div>
                <div class="modal-form-group">
                    <label for="edit-task-condition">Краткое условие:</label>
                    <textarea id="edit-task-condition" rows="3"></textarea>
                </div>
                <div class="modal-form-group">
                    <label for="edit-task-idea">Краткая идея решения:</label>
                    <textarea id="edit-task-idea" rows="3"></textarea>
                </div>
                <div class="modal-form-group">
                    <label for="edit-task-note">Примечание:</label>
                    <textarea id="edit-task-note" rows="2"></textarea>
                </div>
                <div class="modal-form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="edit-task-is-cf-ready" disabled> Подготовлена для Codeforces? (авто)
                    </label>
                </div>
                <div class="modal-form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="edit-task-is-yc-ready"> Подготовлена для Yandex Contest?
                    </label>
                </div>
                <div class="modal-form-group checkbox-group" id="edit-task-tags"></div>
                <div class="modal-form-group checkbox-group" id="edit-task-contests"></div>
                <div class="modal-actions">
                    <button type="submit">Сохранить изменения</button>
                    <button type="button" id="cancel-edit-task">Отмена</button>
                </div>
            </form>
            <p id="edit-task-error-message" class="error-text" style="display: none;"></p>
        </div>
    </div>

    <!-- Модальное окно для редактирования контеста -->
    <div id="edit-contest-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Редактирование контеста</h2>
            <form id="edit-contest-form">
                <input type="hidden" id="edit-contest-id">
                <div class="modal-form-group">
                    <label for="edit-contest-title">Название контеста:</label>
                    <input type="text" id="edit-contest-title" required>
                </div>
                <div class="modal-form-group">
                    <label for="edit-contest-year">Год:</label>
                    <input type="number" id="edit-contest-year" required>
                </div>
                <div class="modal-actions">
                    <button type="submit">Сохранить</button>
                    <button type="button" id="cancel-edit-contest">Отмена</button>
                </div>
            </form>
            <p id="edit-contest-error-message" class="error-text" style="display: none;"></p>
        </div>
    </div>

    <!-- Модальное окно для редактирования тега -->
    <div id="edit-tag-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Редактирование тега</h2>
            <form id="edit-tag-form">
                <input type="hidden" id="edit-tag-id">
                <div class="modal-form-group">
                    <label for="edit-tag-title">Название тега:</label>
                    <input type="text" id="edit-tag-title" required>
                </div>
                <div class="modal-actions">
                    <button type="submit">Сохранить</button>
                    <button type="button" id="cancel-edit-tag">Отмена</button>
                </div>
            </form>
            <p id="edit-tag-error-message" class="error-text" style="display: none;"></p>
        </div>
    </div>

    <!-- Модальное окно для смены пароля -->
    <div id="change-password-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Смена пароля администратора</h2>
            <form id="change-password-form">
                <div class="modal-form-group">
                    <label for="old-password">Старый пароль:</label>
                    <input type="password" id="old-password" required>
                </div>
                <div class="modal-form-group">
                    <label for="new-password">Новый пароль (мин. 6 символов):</label>
                    <input type="password" id="new-password" required minlength="6">
                </div>
                <div class="modal-form-group">
                    <label for="confirm-new-password">Подтвердите новый пароль:</label>
                    <input type="password" id="confirm-new-password" required>
                </div>
                <div class="modal-actions">
                    <button type="submit">Сохранить новый пароль</button>
                    <button type="button" id="cancel-change-password">Отмена</button>
                </div>
            </form>
            <p id="change-password-error-message" class="error-text" style="display: none;"></p>
        </div>
    </div>

    <script src="renderer.js"></script> 
</body>
</html>